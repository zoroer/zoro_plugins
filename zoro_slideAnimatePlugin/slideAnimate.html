<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>slideAnimate</title>
    <style type="text/css">
        *, body{  margin: 0;  padding: 0; }
        ul li{list-style-type: none;}
        .slideAnimate{
            height: 400px;   /*根据自己的需要进行修改样式*/
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 5px #eee;
        }
        .slideAnimate ul{
            height: 100%;
            width: 100%;
            position: absolute;
            overflow: hidden;
            left:0;
            top:0;
        }
        .slideAnimate ul li{
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .grab {
            cursor: -webkit-grab;
            cursor: -moz-grab;
            cursor: grab;
        }
        .grabbing {
            cursor: -webkit-grabbing;
            cursor: -moz-grabbing;
            cursor: grabbing;
        }
    </style>
</head>
<body>

<div class="slideAnimate">
    <ul>
        <li><img src="./img/img1.jpg" /></li>
        <li><img src="./img/img2.jpg" /></li>
        <li><img src="./img/img3.jpg" /></li>
        <li><img src="./img/img4.jpg" /></li>
        <li><img src="./img/img5.jpg" /></li>
    </ul>
</div>

<script type="text/javascript" src="jquery-3.2.1.min.js"></script>
<script type="text/javascript">
    $(function(){
        /**
         * 调用的选项
         */
        slideAnimate({
            wrapName: '.slideAnimate',
            animateDirection: "left",
            animateSpeed: -2,  //speed 大于0向右或下滑动，小于0向左或上滑动 (需要同时设置方向和速度参数!!!)
            textMode: false,
            textModeStyle: {
                fontSize: '20px',
                color: "#f00"
            }
        });

        /**
         * 动画函数
         * @param condition 动画函数的配置对象{}
         * 包含三个参数wrapName，direction，animateSpeed
         */
        function slideAnimate(condition){
            var wrapName = condition.wrapName || '.slideAnimate';
            var direction = /left|right|top|bottom/.test(condition.animateDirection) ? condition.animateDirection : 'left';
            var animateSpeed = condition.animateSpeed || 2;
            var textMode = condition.textMode || false;
            var directionCssObj = {};
            var dragPosStart = 0;
            var timer = null;

            handleInterval("add");

            //复制html节点
            var oUl = $(wrapName).find("ul");
            oUl.append(oUl.html());
            var oLi = oUl.find("li");

            //判断动画的方向
            if( /left|right/.test(direction) ) {
                directionCssObj = {
                    direction: "left",
                    directionProp: "width"
                };

                //处理css部分属性
                $(".slideAnimate").find("li").css({"float": "left", "height": "100%"}).find("img").css("width", "100%");

                //重新计算li以及wrap的长度
                oLi.css("width", oUl.width() / (oLi.length / 2) + "px");
                oUl.css("width", oLi.width() * oLi.length + "px");
            }else{
                directionCssObj = {
                    direction: "top",
                    directionProp: "height"
                };

                //判断是否是文字模式并处理对应的css部分属性
                if(textMode){
                    //赋值传入的文字css
                    oLi.css(condition.textModeStyle);

                }else {
                    $(".slideAnimate").find("img").css("height", "100%");
                    oLi.css("height", oUl.height() + "px");
                }

                //重新计算wrap的高度
                oUl.css("height", oLi.height() * oLi.length + "px");
            }

            /**
             * 处理滑动动画
             */
            function handleAnimate() {
                if(directionCssObj){
                    var propNumber = parseInt(oUl.css(directionCssObj.direction).replace(/[^0-9]/gi, ""));

                    if (animateSpeed > 0) {
                        //大于0方向向下或者向右
                        propNumber === 0
                            ? oUl.css(directionCssObj.direction, -oUl[directionCssObj.directionProp]() / 2 + "px")
                            : oUl.css(directionCssObj.direction, "+=" + animateSpeed + "px");
                    } else {
                        //小于0方向向上或者向左
                        propNumber >=  oLi[directionCssObj.directionProp]() * (oLi.length / 2)
                            ? oUl.css(directionCssObj.direction, "0px")
                            : oUl.css(directionCssObj.direction, "+=" + animateSpeed + "px");
                    }
                }else{
                    console.warn("directionCssObj不能为空!");
                }
            }

            //移动事件
            oUl.on({
                "mouseover": function(){ handleInterval("cancel") },
                "mouseout": function(){ handleInterval("add") },
                "mousedown": function (e) {
                    e.preventDefault();
                    $(this).addClass("grab");
                    dragPosStart = e.pageX;
                },
                "mouseup": function (e) {
                    e.preventDefault();
                    $(this).removeClass("grab");
                    var ulLeft = parseInt( $(this).css(directionCssObj.direction).replace(/[^0-9|-]/gi, "") );
                    var propLength = oLi[directionCssObj.directionProp]() * (oLi.length / 2);
                    var computedLeft = ulLeft + (e.pageX - dragPosStart);

                    if( computedLeft > 0 ) {
                        $(this).css(directionCssObj.direction, "0px");
                    }else if( Math.abs(computedLeft) > propLength ) {
                        $(this).css(directionCssObj.direction, -propLength + "px");
                    }else {
                        $(this).css(directionCssObj.direction, ulLeft + (e.pageX - dragPosStart) + "px");
                    }
                }
            });

            /**
             * 定时器操作
             * @param type  add or cancel
             */
            function handleInterval(type){
                type === 'add'
                    ? timer = setInterval(handleAnimate, 20)
                    : clearInterval(timer);
            }
        }
    });
</script>
</body>
</html>